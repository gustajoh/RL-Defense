FROM ubuntu:20.04

ENV DEBIAN_FRONTEND=noninteractive

RUN apt-get update && apt-get install -y \
        build-essential \
        curl \
        wget \
        vim \
        git \
        net-tools \
        nmap \
        telnet \
        openssh-server \
        openssh-client \
        iproute2 \
        ifupdown \
        iputils-ping &&\
        rm -rf /var/lib/apt/lists/*

RUN mkdir /var/run/sshd && \
        echo 'root:root' | chpasswd && \
        sed -i 's/PermitRootLogin prohibit-password/PermitRootLogin yes/' /etc/ssh/sshd_config && \
        sed -i 's/#PermitRootLogin/PermitRootLogin/' /etc/ssh/sshd_config && \
        sed -i 's/UsePAM yes/UsePAM no/' /etc/ssh/sshd_config

RUN useradd -ms /bin/bash james && \
        echo 'james:james2' | chpasswd

EXPOSE 80 443 22 23

WORKDIR /root

CMD service ssh start && /usr/sbin/inted -d && bash
